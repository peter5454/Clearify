<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Clearify</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
  <!-- ===== HEADER ===== -->
  <header>
    <h1>Clearify</h1>
    <nav>
      <button><a href="{{ url_for('about') }}">About Us</a></button>
    </nav>
  </header>

  <!-- ===== HERO SECTION ===== -->
  <section class="hero">
    <h1>Clearify</h1>
    <p>Advanced AI-powered bias detection and fake news analysis.</p>
    <p>Get instant insights into content reliability and political leaning.</p>

    <div class="hero-tags">
      <span><img src="{{ url_for('static', filename='Tick Box.png') }}" width="20" class="tick"> Reliable</span>
      <span><img src="{{ url_for('static', filename='Tick Box.png') }}" width="20" class="tick"> Real-time analysis</span>
      <span><img src="{{ url_for('static', filename='Tick Box.png') }}" width="20" class="tick"> Fast</span>
    </div>
  </section>

  <!-- ===== MAIN ANALYSIS SECTION ===== -->
  <main style="max-width: 700px; margin: auto; padding: 1rem;">
    <!-- ===== INPUT CARD ===== -->
    <div class="card">
      <div class="card-header">Analyze Content</div>
      <div class="card-content">
        <!-- Toggle Switch -->
        <div class="switch-container active" id="toggleSwitch" style="margin-bottom:1rem;">
          <div class="switch-label text">Text Analysis</div>
          <div class="switch-label url">URL Analysis</div>
          <div class="switch-slider"></div>
        </div>

        <!-- Text Input -->
        <div id="textInputWrapper">
          <label for="inputText">Enter text to analyze:</label>
          <textarea id="inputText" rows="6" placeholder="Paste text here..."></textarea>
        </div>

        <!-- URL Input -->
        <div id="urlInputWrapper" style="display:none;">
          <label for="inputUrl">Enter a URL to analyze:</label>
          <input type="text" id="inputUrl" placeholder="https://example.com/article" />
        </div>

        <button id="analyzeBtn" class="analyze">Analyze Content</button>
      </div>
    </div>

    <!-- ===== RESULTS SECTION (hidden until analysis complete) ===== -->
    <section id="results" class="results" style="display:none;">
      
      <!-- ===== Analysis Overview ===== -->
      <div class="card">
        <div class="card-header">Analysis Complete: Bias & Fake News Risk</div>
        <div class="card-content">
          <p id="summary">Content analyzed successfully. <span id="wordsAnalyzed">0</span> words processed.</p>
          <div class="score-container">
            <span id="biasScore" class="score bias">Bias: 0%</span>
            <span id="fakeNewsScore" class="score risk">Fake News Risk: 0%</span>
          </div>
        </div>
      </div>

      <!-- ===== Language and Tone Analysis ===== -->
      <div class="card">
        <div class="card-header">Language and Tone Analysis</div>
        <div class="card-content">
          <div class="summary-block">
            <strong>Code for user data:</strong>
            <p>Language and tone: <span id="emotionalWords">12%</span> of words were emotionally charged</p>
          </div>
        </div>
      </div>

      <!-- ===== Sentiment and Bias ===== -->
      <div class="card">
        <div class="card-header">Sentiment and Bias</div>
        <div class="card-content">
          <p><span id="positiveSentiment">90%</span> Positive sentiment</p>
          <p><span id="negativeSentiment">84%</span> Negative sentiment about government work</p>
          <canvas id="sentimentChart" width="400" height="200"></canvas>
        </div>
      </div>
      <!-- ===== Political & Social Bias Analysis ===== -->
      <div class="card">
        <div class="card-header">Political & Social Bias</div>
        <div class="card-content grid-2">
          <!-- Political -->
          <div class="analysis-card">
            <h3>Political Leaning</h3>
            <p class="muted">Model prediction</p>
            <div class="analysis-main">
              <div class="label-big" id="politicalLabel">—</div>
              <div class="muted small" id="politicalText">Confidence: <span id="politicalConfidence">0%</span></div>

              <div class="progress" aria-hidden="true">
                <div id="politicalProgress" class="progress-inner" style="width:0%"></div>
              </div>

              <p class="muted tiny" id="politicalNote">Prediction sources: model</p>
            </div>
          </div>

          <!-- Social Bias -->
          <div class="analysis-card">
            <h3>Social Bias Category</h3>
            <p class="muted">SBIC model prediction</p>
            <div class="analysis-main">
              <div class="label-big" id="socialLabel">—</div>
              <div class="muted small" id="socialText">Confidence: <span id="socialConfidence">0%</span></div>

              <div class="progress" aria-hidden="true">
                <div id="socialProgress" class="progress-inner" style="width:0%"></div>
              </div>

              <p class="muted tiny" id="socialNote">Categories: race, gender, social, etc.</p>
            </div>
          </div>
        </div>
      </div>

            <!-- ===== Gemini Summary ===== -->
      <div class="card" id="gemini-summary-card" style="display:none;">
        <div class="card-header">AI Summary</div>
        <div class="card-content">
          <div class="summary-block">
            <strong>Overall Summary:</strong>
            <p id="geminiOverall">—</p>
          </div>
          <div class="summary-block">
            <strong>Political Bias Summary:</strong>
            <p id="geminiPolitical">—</p>
          </div>
          <div class="summary-block">
            <strong>Social Bias Summary:</strong>
            <p id="geminiSocial">—</p>
          </div>
          <div class="summary-block">
            <strong>Fake News Summary:</strong>
            <p id="geminiFakeNews">—</p>
          </div>
          <div class="summary-block">
            <strong>Final Verdict:</strong>
            <p id="geminiVerdict">—</p>
          </div>

          <div class="summary-block">
            <strong>Political Spectrum Position:</strong>
            <div id="spectrumBar" class="spectrumBar">
              <div id="spectrumMarker" class="spectrumMarker"></div>
            </div>
            <div id="spectrumLegend" class="spectrumLegend">
              <span>Left</span>
              <span>Center</span>
              <span>Right</span>
            </div>
          </div>
        </div>
      </div>


      <!-- ===== Word Repetition Analysis ===== -->
      <div class="card">
        <div class="card-header">Word Repetition Analysis</div>
        <div class="card-content">
          <ul id="wordRepetitionList"></ul>
          <canvas id="wordChart" width="400" height="200"></canvas>
        </div>
      </div>

      <!-- ===== Feedback Section ===== -->
      <div class="card">
        <div class="card-header">Feedback</div>
        <div class="card-content">
          <p>Rate the accuracy of this analysis:</p>
          <div class="feedback-stars" id="stars">
            <span data-val="1">★</span>
            <span data-val="2">★</span>
            <span data-val="3">★</span>
            <span data-val="4">★</span>
            <span data-val="5">★</span>
          </div>
          <textarea id="feedbackText" rows="4" placeholder="Additional feedback..."></textarea>
          <button id="feedbackBtn" class="analyze">Submit Feedback</button>
          <p id="feedbackMsg" style="color:green; display:none;">Thanks for your feedback!</p>
        </div>
      </div>
    </section>
  </main>

  <!-- ===== SCRIPTS ===== -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
